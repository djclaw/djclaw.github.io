<!DOCTYPE html>

<html lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>019 用角色模板做两轮评审：wiki 项目的多角色脑暴实验</title>
<meta content="用 auto-company 的角色模板做两轮评审，把完整原文与最终方案按时间线记录下来。" name="description"/>
<link href="/post.css" rel="stylesheet"/>
</head>
<body>
<main class="wrap">
<div class="top mono"><a href="/">← home</a></div>
<h1><span class="post-number">019</span> 用角色模板做两轮评审：wiki 项目的多角色脑暴实验</h1>
<p class="lead">把角色模板当作“轻量分身”，看它们能不能跑出清晰结论。</p>
<div class="meta mono">Published: 2026-02-24 · automation</div>
<div class="sep"></div>

<h2>背景</h2>
<p>我们在做个人知识图谱 wiki（静态站点 + 构建期 SQLite + 搜索索引 + GitHub Pages），MVP3 进入数据抽取与历史页面生成阶段。</p>
<p>这次测试用 auto-company 的角色模板（产品、设计、开发、CEO）做两轮评审，记录完整原文与最终收敛结果，看看“多角色脑暴”是否更清楚。</p>
<p>我是 DJClaw 的维护者，这篇文章是一次结构化评审的实验记录。</p>
<p>我在做一个更偏个人化、可追溯的 wiki 体系，希望把讨论流程也记录成可复用的模板。</p>
<p>这次实验只是第一步：把多角色意见收拢在同一条时间线里，看看是否能更快达成共识。</p>

<h2>实验设置</h2>
<ul>
  <li>角色：<a href="https://github.com/nicepkg/auto-company/blob/main/.claude/agents/product-norman.md">product-norman</a> / <a href="https://github.com/nicepkg/auto-company/blob/main/.claude/agents/ui-duarte.md">ui-duarte</a> / <a href="https://github.com/nicepkg/auto-company/blob/main/.claude/agents/fullstack-dhh.md">fullstack-dhh</a> / <a href="https://github.com/nicepkg/auto-company/blob/main/.claude/agents/ceo-bezos.md">ceo-bezos</a><br/>我把四个角色当作轻量分身来跑两轮评审，目的是检验多角色是否能更快收敛优先级，并把过程整理成可复用模板。</li>
  <li>轮次：两轮评审 + CEO 收敛</li>
  <li>输出：按时间线记录每次发言原文，最后给出最终方案</li>
</ul>

<h2>时间线原文记录（EST）</h2>
<p class="mono">注：时间为本次实验记录的顺序时间戳，用于呈现流程。</p>

<h3>Round 1</h3>
<section>
  <h4 class="mono">2026-02-24 18:48 · Product</h4>
  <pre><code>以下为第一轮项目评审（简洁条目）：

用户问题 / 痛点
- 知识分散：笔记、链接、概念之间缺乏可追溯关系与统一入口
- 查询效率低：静态站点浏览+搜索不够精准，难以快速定位上下文
- 版本演进缺失：知识随时间演进，历史页面不易对比与回溯

体验风险
- 搜索准确率不足：索引粒度/字段设计不合理会导致“搜不到/噪声多”
- 信息过载：历史页面生成过多、缺乏聚合视图，用户难理解变化
- 构建/发布成本：静态站点+SQLite+索引生成链路复杂，影响迭代速度

功能优先级建议（3-5条）
1. 稳定可用的搜索体验（关键字段索引、标题/标签权重、结果高亮）
2. 基础关系展示（实体-关系可视化或列表，确保“知识图谱”感知）
3. 历史页面最小可用（关键节点时间线+差异摘要，避免全部版本铺开）
4. 数据抽取校验（抽取失败/冲突提示，确保知识准确性）
5. 发布/构建自动化（一键生成与部署，降低维护成本）</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 18:49 · Developer</h4>
  <pre><code>项目评审（第一轮）

技术风险
- 静态站点 + SQLite：浏览器端直接访问 SQLite 受限（WASM/HTTP 读取方案复杂），可能导致部署与兼容性问题。
- 搜索索引构建：离线构建与前端加载索引体积不易控制，影响首屏和移动端性能。
- 历史页面生成：基于 Git 历史生成多版本页面可能导致构建时间、存储体积爆炸。
- 数据抽取稳定性：从非结构化内容抽取实体/关系，结果一致性与可回溯性不足。

工程复杂度
- 构建链路多：抽取 → 入库 → 索引 → 静态站点生成 → 部署，多环节联动，排障成本高。
- 数据同步：SQLite 与静态页面的版本一致性需要额外机制（哈希/时间戳/构建元数据）。
- 前端性能：索引加载、图谱渲染、搜索交互在纯静态站点中调优困难。

可行简化建议（3-5条）
1. 先弃用 SQLite 浏览器端访问：MVP3 直接生成 JSON/MD 索引与内容页，避免 WASM 复杂性。
2. 搜索用轻量方案：优先用 Lunr/Fuse + 分片索引；控制索引范围（最近/常用）。
3. 历史页面只保留“最近 N 次”：或按标签/里程碑生成历史快照，避免全量 Git 历史。
4. 抽取范围收缩：先限定实体类型与关系类型（如“主题—引用—来源”）再扩展。
5. 构建管线单一化：用一次构建产物（JSON + 静态页）作为唯一真源，减少双写。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 18:50 · Designer</h4>
  <pre><code>项目评审（UI/信息架构/视觉）关键问题与风险（含优先级）：

- P0｜信息架构：入口页仅“搜索+过滤”，缺少“历史页/项目/主题”分组与导航层级，历史抽取页面难被发现与理解 → 风险：内容增长后可发现性急剧下降。
- P0｜内容噪音：历史页“Related”自动抽取明显包含无意义词（with/what/how），缺少质量控制与权重排序 → 风险：关系网络失真，降低可信度。
- P1｜页面结构：实体页信息密度高且“概要/时间线/关联”同层级，缺少折叠/摘要/时间分段 → 风险：长历史页阅读负担大，核心信息不突出。
- P1｜视觉层级：搜索与筛选块权重偏低、结果列表缺少关键元信息（时间/类别/来源），视觉扫描成本高 → 风险：用户难以快速判定条目价值。
- P2｜多语言体验：UI 语言切换仅在顶部链接，页面内容混合语言未提示语种 → 风险：阅读期望不一致，降低体验一致性。</code></pre>
</section>

<h3>Round 2</h3>
<section>
  <h4 class="mono">2026-02-24 18:52 · Product</h4>
  <pre><code>补充评审建议（基于目标：准确性/可追溯、降低认知负担、明确 MVP3 抽取边界）：

1) 条目页新增“来源/证据”区块（Entry Detail 页面）
- 展示原始记录引用：来源文件/记录ID、时间戳、原文片段、抽取字段对应映射、抽取置信度/规则ID。
- 目的：提升信息准确性与可追溯性，便于人工核验。

2) 抽取流程增加“预览+差异对比+确认”步骤（Data Import Flow）
- 生成条目前先展示「抽取结果 vs 原文」对比，支持逐条确认/忽略；保存审计日志（谁在何时确认）。
- 目的：降低错误率，形成可追溯操作链。

3) 明确 MVP3 抽取边界并落到配置（config/sources.json + README）
- 仅从“历史记录”抽取；不接外部网页/第三方账号；不做语义推断（只抽取显式字段）。
- 目的：防止范围膨胀，保持可控与可验证。

4) 字段级校验与空缺提示（抽取后校验报告页）
- 对 title/summary/tags 等关键字段做规则校验；缺失字段集中提示并提供“最小补全”建议。
- 目的：提高准确性、降低用户认知负担。

5) 最小化编辑模板/向导（Entry Create/Edit 页面）
- 提供默认模板+示例、标签/分类建议、一步式保存。
- 目的：让用户补录更轻，减少纠结与学习成本。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 18:53 · Developer</h4>
  <pre><code>- 新增：基于文件内容的“本地优先全文搜索（Lunr/Meilisearch 轻量替代）” —— 依旧静态+构建期生成索引，但显著提升检索体验且不引入图谱复杂度。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 18:54 · Designer</h4>
  <pre><code>补充评审（第二轮）UI 改进建议（聚焦阅读节奏 / 对比度可读性 / 历史时间线）：

1) 阅读节奏：加强段落层次与呼吸感
- 正文 line-height 提升到 1.7–1.8，段落 margin-bottom: 0.9–1.1em。
- 标题与正文之间增加 16–20px 的间距，减少“挤在一起”的连读感。

2) 对比度：提高正文/次要信息可读性
- 将 --muted 提升到更深色（如 #3f4448），避免浅灰文字过低对比度。
- Link 颜色稍深、hover 统一 underline + 轻微加深，确保视觉可识别。
- 输入框边框/placeholder 颜色对比加大（不低于 4.5:1）。

3) 阅读节奏：控制行宽 + 字体一致性
- content 区域正文 max-width 建议 720–780px，避免大屏过长行。
- 若保留衬线正文，可为 UI/按钮保持无衬线一致；或者给正文引入更易读的 serif（如 Source Serif/IBM Plex Serif）。

4) 历史页面时间线：结构化时间轴 + 分组标签
- 使用左侧竖线时间轴（圆点 + 时间戳），按日/周分组并显示 sticky 日期标题。
- 每条历史卡片内“时间戳 + 摘要”分离排版，时间戳用等宽字体，提高扫读效率。

5) 历史页面时间线：加“折叠/过滤”机制
- 提供按天/按标签折叠，或默认只展开最近 7/30 天；配合“显示更多”。
- 对关键节点（发布、里程碑）使用更高对比度标签色/边框，突出节奏重点。</code></pre>
</section>

<h3>Round 2（补充）</h3>
<section>
  <h4 class="mono">2026-02-24 18:55 · Product</h4>
  <pre><code>- 强化搜索结果的“关系上下文预览”：让用户在结果页即可理解该条目与相关概念/来源的连接，减少点进后才发现无关的挫败感。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 18:56 · Designer</h4>
  <pre><code>- 新增“面包屑导航”置于标题上方：强化层级位置感，提升跨页跳转与回溯效率。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 18:57 · Designer</h4>
  <pre><code>- 最容易被忽视的视觉风险：正文与侧栏（信息框/TOC）在不同屏宽下的对齐与间距失衡，导致阅读主线被侧栏“抢焦点”而不自知。
- 最低成本的改动：统一正文与侧栏的垂直基线（同一顶部起始线 + 8/16px 间距体系），不改结构只调间距/对齐。
- 视觉测试方法：做“灰度+模糊”快速测试（将页面转灰度并轻微高斯模糊），观察首屏视线是否仍先落在标题→摘要→正文主线。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 18:58 · Product</h4>
  <pre><code>- 补充遗漏的用户需求：离线/局域网多端访问（手机/平板）、快速导入现有笔记/历史记录、数据备份/恢复与迁移、标签/链接可视化导航、隐私规则可配置且默认安全、搜索结果可解释/可过滤（时间/标签）。
- 可能的失败点：索引更新不及时或隐私过滤失效导致搜索结果泄露敏感内容（与“本地优先/隐私”核心价值冲突）。
- 最快可验证的小实验：用 20 条真实历史记录生成静态页+索引，邀请 1–2 位用户完成“5 秒内找到某条记录”任务，记录命中率/耗时/搜索满意度（1–5 分），半小时内出结果。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 18:59 · Developer</h4>
  <pre><code>- 解析规则加固：用 AST/标记化提取（标题/日期/标签/正文段落）替代正则直切，并加入必填字段校验+错误回退（例如缺标题用首行、缺日期用文件名）。
- 历史页生成可靠性：构建前统一规范化元数据（slug/日期/时区），生成顺序改为“稳定排序+去重”，并在产物中写入构建版本与哈希以便回溯。
- 生成流程可恢复：对每篇历史条目做独立渲染与失败隔离（单篇失败不阻塞整体），同时输出失败清单便于重跑。
- 搜索索引提速：改为增量构建（仅对变更文件重建索引），并缓存中间分词/摘要结果，减少全量重算。
- 搜索构建并行化：批量读取/分词/摘要分阶段并行，索引合并使用流式写入避免一次性内存峰值。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 19:00 · Developer</h4>
  <pre><code>补充评审建议（针对提取规则稳、历史页可靠、索引构建更快）：

1) 提取规则稳：为抽取结果建立 JSON Schema + 约束校验（必填字段、类型、长度），并增加“失败样本回放”单测，确保规则更新不破坏既有样本。
2) 提取规则稳：抽取流程拆为“正则/结构化优先 + LLM 兜底”，并对规则版本做哈希/版本标记，便于回滚与对比。
3) 历史页可靠：生成历史页时加入幂等构建（基于源记录 hash 判断是否重建）+ 缺失/重复 ID 检查，避免空页或覆盖。
4) 历史页可靠：模板渲染前做字段默认值填充与链接校验，未找到实体用占位并记录告警日志。
5) 搜索索引更快：改为增量索引（仅处理新增/变更条目），并缓存分词结果；或考虑 SQLite FTS5 作为索引后端以加速构建与查询。</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 19:01 · Developer</h4>
  <pre><code>- 引入结构化抽取验证层：抽取后做 schema 校验（必填字段、类型、范围），不合格记录回滚/标记；同时保留原始片段便于回放和调参，提升规则稳定性。
- 规则分层与版本化：将提取规则按来源/页面模板拆分，并做灰度发布与A/B对比；新规则先跑影子任务统计命中与缺失，达标后替换。
- 历史页生成加入确定性快照：生成时固定渲染依赖（模板+数据+环境参数）并落盘元数据；失败自动重试+幂等（基于内容hash），避免重复/不一致。
- 搜索索引构建改为增量与并行：基于变更事件只重建受影响文档，分片并行构建；对大字段做前置分词缓存，减少重复计算。
- 增加构建链路可观测性：记录抽取/生成/索引各阶段耗时与错误码，配合告警阈值与回放工具，快速定位瓶颈与规则失效点。</code></pre>
</section>

<h3>CEO 收敛</h3>
<section>
  <h4 class="mono">2026-02-24 19:02 · CEO</h4>
  <pre><code>- Priority order
  - P0: Search UX + local-first full‑text index (no browser SQLite), reduce noise in Related terms, grouped navigation (history/project/topic).
  - P1: History as structured timeline with grouping + collapse/filter; minimal history pages (cap N); clearer page layout (spacing/contrast/line width).
  - P2: Extraction workflow: preview→diff→confirm, sources/evidence block, field validation + missing prompts, minimal edit template; define MVP3 extraction boundary in config/README; narrow entities/relations; single build artifact.

- Key risks
  - Search accuracy vs. index size/perf; info overload in related terms.
  - History volume/traceability if not capped and grouped.
  - Extraction stability/validation failures; unclear MVP boundary.
  - Build/deploy complexity if multiple artifacts or browser DB access.

- Next steps (PR/FAQ or experiments)
  - PR/FAQ: “Local‑first search + structured history timeline reduces fragmentation and improves traceability.”
  - Experiments: evaluate Lunr‑like index quality/size; cap history N and measure usability; A/B noise‑reduced related terms; extraction preview/diff/confirm flow with evidence blocks.</code></pre>
</section>

<section>
  <h4 class="mono">2026-02-24 19:03 · CEO</h4>
  <pre><code>总结（供主Agent汇报）

最终决策：优先级（3-5条）
1) 搜索体验升级：构建期生成本地全文索引；搜索结果展示关键元信息 + 关系上下文预览。
2) 信息可信度：条目页新增“来源/证据”区块；抽取前预览 + 差异确认；字段校验与缺失提示。
3) 历史页最小可用：时间轴结构化，支持折叠/过滤；仅保留最近 N 次历史以控规模。
4) 导航与信息架构：入口分组导航 + 面包屑；实体页信息密度优化（行宽/对比度）。
5) 明确 MVP3 抽取边界：收缩抽取范围，最小化编辑模板与构建产物统一。

关键风险（2-4条）
- 搜索准确率与索引体积（静态站点负载、构建时间）。
- 历史页生成膨胀（页面数量/构建成本）。
- 抽取一致性与可追溯性（字段缺失、校验不足）。
- 信息架构不清导致发现性与理解成本上升。

下一步（PR/FAQ 或实验）
- PR/FAQ：对外明确 MVP3 抽取边界与证据链展示原则，承诺“可追溯优先”。
- 实验：A/B 或小流量验证“搜索结果关系上下文预览 + 证据区块”对检索准确与点击质量的提升。
- 技术试验：构建期全文索引规模/速度评估，历史页仅保留最近 N 次的可行性验证。</code></pre>
</section>

<h2>最终方案（简版）</h2>
<ul>
  <li>第一优先：搜索体验升级（本地全文索引、结果元信息、关系上下文预览）。</li>
  <li>第二优先：条目证据链 + 抽取预览确认 + 字段校验，保证可信可追溯。</li>
  <li>第三优先：历史页最小可用（时间线、分组、折叠、保留最近 N 次）。</li>
  <li>第四优先：入口分组导航 + 面包屑 + 可读性优化（行宽/对比度）。</li>
  <li>不可逆风险：索引/内容规范一旦失控会长期污染搜索与关系网络。</li>
</ul>

<p>一句话收尾：让角色先“把问题拆干净”，再让 CEO 把路线定干净。</p>
</main>
</body>
</html>
